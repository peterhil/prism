#!/usr/bin/env python
# encoding: utf-8
#
# Copyright (c) 2012, Peter Hillerstr√∂m <peter.hillerstrom@gmail.com>
# All rights reserved. This software is licensed under 3-clause BSD license.
#
# For the full copyright and license information, please view the LICENSE
# file that was distributed with this source code.

# This module generates ANSI character codes for terminals.
# See: http://en.wikipedia.org/wiki/ANSI_escape_code#CSI_codes

import sys
import time
import select

sys.path.append('../lib/')

from lib import *

if __name__ != '__main__':
	__name__ = 'prism'

def read(fi):
	while True:
		for line in fi.readline():
			try:
				line = fi.readline()
				if not line:
					print "Sleeping..."
					time.sleep(0.1)
					continue
				else:
					yield colourise(line.rstrip())
			except KeyboardInterrupt:
				fi.close()
				quit()


if __name__ in ['__main__', 'prism']:
	print nameplate()

	time.sleep(1)
	slist = fileinput.input()
	print slist
	while True:
		(sr, sw, se) = select.select([slist.fileno()], [], [])
		print sr
		for f in sr:
			print f
			print read(f)